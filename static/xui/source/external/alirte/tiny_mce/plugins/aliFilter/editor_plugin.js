
(function(){tinymce.create("tinymce.plugins.aliPasteFilter",{init:function(ed,url){var t=this,DOM=tinymce.DOM;t.url=url;ed.onChange.add(function(ed,e){ed.aliRTE_hasChanged=true;});var txt=DOM.get(ed.id);txt.onkeyup=function(){ed.aliRTE_hasChanged=true;};ed.addCommand('aliFilterHTML',function(){if(false){if(ed.aliRTE_hasChanged){var reg=[/<(((no)?script)|style|head|select|input|testarea|form|([i]?frame(set)?))([][^<>]*)?>(.|\n|\r)*?<\/\1([][^<>]*)?>/gi,/<[\/]?(script|noscript|style|head|select|form|iframe|frame|frameset|\!DOCTYPE|abbr|acronym|address|applet|base|basefont|bdo|body|button|code|del|dir|dfn|fieldset|html|input|ins|isindex|kbd|label|legend|link|menu|meta|noframes|object|optgroup|option|param|q|s|samp|textarea|title|tt|var|xmp|alitemp)([\s][^<>]*?)?>/gi,/[\s](id|name|class|(on[\w]+?))\="[^"\n\r]*?"/gi,/<a(.*)href="?(.*)((?!taobao|alipay|alibaba|yahoo|alisoft|alimama|koubei|aliimg)\w)+\.(.*)"?([^>]*)>([^<]*)<\/a>/gi],_html,replaced=false;_html=ed.getContent();if(reg[0].test(_html)){_html=_html.replace(reg[0],"");replaced=true;}
if(replaced){ed.setContent(_html);}
ed.aliRTE_hasChanged=false;}}});},_clear:function(ed,ev,t){if(false){var t=this;var DOM=tinymce.DOM,dom;if(ev.keyCode==17){ed.execCommand('mceInsertContent',false,'<div id="dv_ali_v_v"></div>');}
if((ev.ctrlKey&&ev.keyCode==86)||arguments.length==3){if(!tinymce.isIE){}
dom=DOM.get('dv_ali_v_v')||ed.selection.getEnd();setTimeout(function(){var reg=[/<(((no)?script)|style|head|select|input|testarea|form|([i]?frame(set)?))([][^<>]*)?>(.|\n|\r)*?<\/\1([][^<>]*)?>/gi,/<[\/]?(script|noscript|style|head|select|form|iframe|frame|frameset|\!DOCTYPE|abbr|acronym|address|applet|base|basefont|bdo|body|button|code|del|dir|dfn|fieldset|html|input|ins|isindex|kbd|label|legend|link|menu|meta|noframes|object|optgroup|option|param|q|s|samp|textarea|title|tt|var|xmp|alitemp)([ ][^<>]*?)?>/gi,/[ ](id|name|class|(on[\w]+?))\="[^"\n\r]*?"/gi,/\"http[s]?:\/\/([a-z0-9\-_]+\.)*((?!taobao|alipay|alibaba|yahoo|alisoft|alimama|koubei|aliimg)\w)+\.(com|net|cn|com\.cn)(\/.*)*\"/gi],ctt,sr;sr=ctt=dom.innerHTML;if(reg[0].test(ctt)){ctt=ctt.replace(reg[0],"");}
if(sr!==ctt){dom.innerHTML=ctt;}},1);}}},getInfo:function(){return{longname:'aliPasteFilter',author:'Aissa',authorurl:'none',infourl:'none',version:tinymce.majorVersion+"."+tinymce.minorVersion};}});tinymce.PluginManager.add('aliFilter',tinymce.plugins.aliPasteFilter);})();
