xui.widgets.Dtip=function(a,b){this._config={closeBar:true};if(a&&a.constructor==String){this.show(a,b)}else{this.setArrt(a);this.show()}};xui.widgets.Dtip.prototype={setArrt:function(b){for(var a in b){if(a=="id"){this["_config"]["pro"]=$(b[a])}this["_config"][a]=b[a]}},show:function(g,h){if(g){this.setArrt({msg:g})}if(h){if(h.constructor==String){this.setArrt({id:h})}if(h.nodeType){this.setArrt({pro:h})}}if(!this.nodid){this.nodid=$UUID("dtip-");var f=document.createElement("div");f.id=this.nodid;f.className="xui-dtip";f.style.display="none";var b=document.createElement("div");b.style.position="absolute";b.style.width="100%";b.style.height="0";b.style.top="0";b.style.left="0";document.body.appendChild(b);b.appendChild(f)}$(this.nodid).innerHTML='<div class="xui-dtip-con">'+this._config.msg+"</div>";$(this.nodid).style.display="block";if(this._config.closeBar){this._getCloseinner()}this._getXY();try{(this._config.before)()}catch(c){}if(this._config.timeout){var a=this;setTimeout(function(){a.hide()},a._config.timeout)}},_getXY:function(){var g=[0,0],c=[0,0],b=[0,0],f="xui-dtip-arr1";if(this._config.pro){g=xui.util.Dom.getXY(this._config.pro);g[0]=isNaN(g[0])?0:g[0];g[1]=isNaN(g[1])?0:g[1];c=[parseInt(this._config.pro.offsetWidth),parseInt(this._config.pro.offsetHeight)]}if(this._config.width){var a=parseInt(this._config.width);if(!isNaN(a)){$(this.nodid).style.width=a+"px"}}if(this._config.height){var e=parseInt(this._config.height);if(!isNaN(e)){$(this.nodid).style.height=e+"px"}}b=[parseInt($(this.nodid).offsetWidth),parseInt($(this.nodid).offsetHeight)];if(this._config.classname){if(this._config.classname=="topright"||this._config.classname==2){g[0]=g[0]+c[0]-b[0];g[1]=g[1]-b[1]-8;f="xui-dtip-arr2"}if(this._config.classname=="righttop"||this._config.classname==3){g[0]=g[0]+c[0]+13;g[1]=g[1]-b[1]+c[1];f="xui-dtip-arr3"}if(this._config.classname=="rightbottom"||this._config.classname==4){g[0]=g[0]+c[0]+13;f="xui-dtip-arr4"}if(this._config.classname=="bottomright"||this._config.classname==5){g[1]=g[1]+c[1]+8;f="xui-dtip-arr5"}if(this._config["class"]=="bottomleft"||this._config.classname==6){g[0]=g[0]+c[0]-b[0];g[1]=g[1]+c[1]+8;f="xui-dtip-arr6"}if(this._config.classname=="leftbottom"||this._config.classname==7){g[0]=g[0]-b[0]-13;f="xui-dtip-arr7"}if(this._config.classname=="lefttop"||this._config.classname==8){xxy[0]=g[0]-b[0]-13;g[1]=g[1]-b[1]+c[1];f="xui-dtip-arr8"}}else{g[1]=g[1]-b[1]-8}if(this._config.left){g[0]=parseInt(this._config.left);g[0]=isNaN(g[0])?0:g[0]}if(this._config.top){g[1]=parseInt(this._config.top);g[1]=isNaN(g[1])?0:g[1]}if(this._config.releft){g[0]=g[0]+parseInt(this._config.releft);g[0]=isNaN(g[0])?0:g[0]}if(this._config.retop){g[1]=g[1]+parseInt(this._config.retop);g[1]=isNaN(g[1])?0:g[1]}g[0]=g[0]<0?0:g[0];g[1]=g[1]<0?0:g[1];$(this.nodid).style.top=g[1]+"px";$(this.nodid).style.left=g[0]+"px";var i=document.createElement("span");i.className=f;$(this.nodid).appendChild(i)},_getCloseinner:function(){var b=document.createElement("a");b.id=this.nodid+"-closebtn";b.className="xui-dtip-closebtn";$(this.nodid).appendChild(b);var c=this;xui.util.Event.on(b,"click",function(){c.close()})},hide:function(){$(this.nodid).style.display="none"},close:function(){this.hide();try{(this._config.close)()}catch(a){}}};