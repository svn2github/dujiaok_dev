xui.widgets.ComboBox=function(c,b,a){this.id=c;this.attrs=b;this._schema=a;this.emptyText=(this.attrs&&this.attrs.emptyText)?this.attrs.emptyText:"";this.editable=(this.attrs&&this.attrs.editable)?this.attrs.editable:false;this.width=(this.attrs&&this.attrs.width)?this.attrs.width:130;this.minChars=(this.attrs&&this.attrs.minChars)?this.attrs.minChars:1;this.displayTrigger=(this.attrs&&!(typeof this.attrs.displayTrigger=="undefined"||this.attrs.displayTrigger==null)&&!this.attrs.displayTrigger)?this.attrs.displayTrigger:true;this.triggerClass=this.displayTrigger?"x-form-arrow-trigger":"x-hide-visibility";this.cross=(this.attrs&&this.attrs.cross)?this.attrs.cross:false;this._displayField=(this.attrs&&this.attrs.label)?this.attrs.label:null;this._valueField=(this.attrs&&this.attrs.value)?this.attrs.value:null;this.lazyRender=(this.attrs&&this.attrs.lazyRender)?this.attrs.lazyRender:false;this.forceSelection=(this.attrs&&this.attrs.forceSelection)?this.attrs.forceSelection:false;this._transform=this.id;if(this.attrs&&this.attrs.transform==false){this._transform=null;this._applyTo=this.id}};xui.widgets.ComboBox.prototype={_store:null,_url:null,_schema:null,_initSore:function(){var a=this.cross?new Ext.data.ScriptTagProxy({url:this._url}):new Ext.data.HttpProxy({url:this._url});this._store=new Ext.data.JsonStore({root:"data",totalProperty:"totalCount",idProperty:"id",remoteSort:true,fields:this._schema,proxy:a});this._store.load()},_initCombox:function(){this.combox=new Ext.form.ComboBox({store:this._store,displayField:this._displayField,valueField:this._valueField,mode:"local",typeAhead:false,forceSelection:this.forceSelection,triggerAction:"all",emptyText:this.emptyText,width:this.width,resizable:true,selectOnFocus:true,triggerClass:this.triggerClass,minChars:this.minChars,minHeight:250,editable:this.editable,lazyRender:this.lazyRender,applyTo:this._applyTo,transform:this._transform});if(xui.env.ua.ie==6){this.combox.on("expand",function(){xui.util.Dom.getElementsByClassName("x-combo-list-inner")[0].style.overflowX="hidden"})}},init:function(a){if(a){this._url=a;this._initSore()}this._initCombox()},on:function(a,d,c,b){this.combox.on(a,d,c,b)},getValue:function(){return this.combox.getValue()},get:function(){return this.combox},setValue:function(a){this.combox.setValue(a)}};