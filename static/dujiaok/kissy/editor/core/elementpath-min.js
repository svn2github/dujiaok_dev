KISSY.Editor.add("elementpath",function(f){function i(a){var c=g,d=g,j=[];for(a=a;a;){if(a[0].nodeType==k.NODE_ELEMENT){if(!this.lastElement)this.lastElement=a;var e=a._4e_name();if(!d){if(!c&&n[e])c=a;if(o[e]){var b;if(b=!c){if(b=e=="div"){a:{b=a;b=l._4e_unwrap(b);b=b.childNodes;for(var h=0,p=b.length;h<p;h++){var m=b[h];if(m.nodeType==k.NODE_ELEMENT&&q.$block[m.nodeName.toLowerCase()]){b=true;break a}}b=false}b=!b}b=b}if(b)c=a;else d=a}}j.push(a);if(e=="body")break}a=a.parent()}this.block=c;this.blockLimit=
d;this.elements=j}var l=KISSY.DOM,q=f.XHTML_DTD,k=f.NODE,g=null,n={address:1,blockquote:1,dl:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,p:1,pre:1,li:1,dt:1,dd:1},o={body:1,div:1,table:1,tbody:1,tr:1,td:1,th:1,caption:1,form:1};i.prototype={compare:function(a){var c=this.elements;a=a&&a.elements;if(!a||c.length!=a.length)return false;for(var d=0;d<c.length;d++)if(!l._4e_equals(c[d],a[d]))return false;return true},contains:function(a){for(var c=this.elements,d=0;d<c.length;d++)if(c[d]._4e_name()in a)return c[d];
return g}};f.ElementPath=i});
