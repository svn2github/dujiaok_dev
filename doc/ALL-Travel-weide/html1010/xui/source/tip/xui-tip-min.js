xui.widgets.Tip=function(){var a=0;return{htmlTmp:'<ul class="xui-tip-ul" id="#uid" onmouseover="xui.widgets.Tip._close(\'#uid\')"><li class="xui-tip-left"></li><li class="xui-tip-bg"><table><tr><td height="25" valign="middle">#msg</td></tr></table></li><li class="xui-tip-right"><span class="xui-tip-btn"></span></li></ul>',show:function(b,c,f,g){if(!f){f=this.htmlTmp}if(!b){alert("[xui.widgets.Tip]\u5bf9\u8c61Id\u4e0d\u5b58\u5728\uff01");return}var e=this.obj=(xui.lang.isString(b))?$(b):b;if(e.style.display=="none"||e.style.visibility=="hidden"){return}var l=xui.util.Dom.getXY(e);if(l[0]==0&&l[1]==0){return}var h=document.createElement("div");h.setAttribute("id","");h.setAttribute("class","xui-tip");h.style.position="absolute";h.style.zIndex="80";h.style.overflow="hidden";h.style.left=(l[0]+2)+"px";h.style.top=(l[1]-35)+"px";var k=$UUID(e.id);xui.widgets.Tip._SRC_ELEMENTS.push(k);if(g&&g.safe){f=f.replace(/#uid/g,k).replace("#msg",xui.util.StringUtil.escapeHTML(c).replace(/&lt;/g,"<").replace(/&gt;/g,">"))}else{f=f.replace(/#uid/g,k).replace("#msg",xui.util.StringUtil.escapeHTML(c).replace(/&lt;br&gt;/g,"<br/>"))}h.innerHTML=xui.util.WinUtil.isIE6()?($Shim()+f):f;document.body.appendChild(h);xui.util.Event.on(e,"mouseover",function(){xui.widgets.Tip._close(k)});xui.util.Event.on(window,"scroll",function(){h.innerHTML=$Shim()+f});xui.util.Event.on(window,"resize",function(){if(e.style.display=="none"||e.style.visibility=="hidden"){return}var m=xui.util.Dom.getXY(e);if(m[0]==0&&m[1]==0){return}h.style.left=(m[0]+2)+"px";h.style.top=(m[1]-20)+"px"});if(!-[1,]){var i=xui.util.Dom.getStyle(h,"width");var d=xui.util.Dom.getStyle(h,"height");var j='<iframe style="filter:alpha(opacity=0); position:absolute; left:0px; top:0px; z-index:-1; width:'+i+";height:"+d+'"></iframe>';h.innerHTML+=j}if(g&&g.autoClose){setTimeout(function(){xui.widgets.Tip.clear()},g.autoClose)}return h},_close:function(d){var c=$(d);if(!c){return}try{c.parentNode.parentNode.removeChild(c.parentNode)}catch(b){}},_SRC_ELEMENTS:[],clear:function(){for(var b=0;b<this._SRC_ELEMENTS.length;b++){var c=$(this._SRC_ELEMENTS[b]);if(c){this._close(c.id)}}this._SRC_ELEMENTS=[]}}}();xui.widgets.QueryTip={config:{maxWidth:0,maxHeight:0,width:0,height:0},init:function(){this.config.docW=xui.util.Dom.getDocumentWidth();this.config.docH=xui.util.Dom.getDocumentHeight();var b=$T("*");this.obj=[];this.htmlTmp='<div class="xui-tip-qtip-bar"><span class="xui-tip-qtip-btn" onclick="xui.widgets.Tip._close(\'#uid\')"></span></div><div id="#uid" class="xui-tip-qtip-border">#msg</div>';var c=this;for(var a=0;a<b.length;a++){if(b.item(a).getAttribute("querytip")){this.obj.push(b[a]);(function(d,e){e.exec(d)})(b[a],c)}}},exec:function(a){if(a.id==""){a.id=$UUID("qtip")}var b=this;xui.util.Event.on(a,"mouseover",function(){xui.widgets.Tip.clear();var c=xui.widgets.Tip.show(a.id,a.getAttribute("querytip"),b.htmlTmp,{safe:true});b.debugTip(c,a)})},debugTip:function(b,e){b.style.color="#616161";var f=b,a=f.offsetWidth,d=f.offsetHeight;if(this.config.width!=0){a=this.config.width;f.style.width=a+"px";d=f.offsetHeight}if(this.config.height!=0){d=this.config.height;f.style.height=d+"px";a=f.offsetWidth}if(a>this.maxWidth&&this.maxWidth!=0){a=this.config.width;f.style.width=a+"px";d=f.offsetHeight}if(d>this.maxHeight&&this.maxHeight!=0){d=this.maxHeight;f.style.height=d+"px";a=f.offsetWidth;f.style.overflow="auto"}var i=e.offsetHeight,c=e.offsetWidth,g=xui.util.Dom.getXY(e);if(a-c<g[0]&&g[0]+a>this.config.docW){b.style.left=g[0]-(a-c)+"px"}if(g[1]-d>0&&g[1]+i+d>this.config.docH){b.style.top=g[1]-d+"px"}else{b.style.top=g[1]+i+"px"}g=xui.util.Dom.getXY(b);xui.util.Event.on(b,"mouseout",function(l){var k=xui.util.Event.getTarget(l),h=true;var m=l.pageX||l.clientX+(document.documentElement.scrollLeft?document.documentElement.scrollLeft:document.body.scrollLeft);var j=l.pageY||l.clientY+(document.documentElement.scrollTop?document.documentElement.scrollTop:document.body.scrollTop);if(m<=g[0]||m>=g[0]+a||j<=g[1]||j>=g[1]+d){xui.widgets.Tip.clear();return}})}};xui.util.Event.on(window,"load",$PreloadClass,[["xui-tip-left","xui-tip-bg","xui-tip-right"]]);xui.util.Event.onDOMReady(function(){xui.widgets.QueryTip.init()});
