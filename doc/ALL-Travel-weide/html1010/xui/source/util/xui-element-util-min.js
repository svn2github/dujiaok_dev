xui.util.ElementUtil=function(c,b,a){if(a){this.attr=a}if(!b){b=document}this.length=0;this.dom=$$(c,b)};xui.util.ElementUtil.prototype={attr:{emptyColor:"#999",loop:true},initEmptyText:function(){for(var b=0,a=this.dom.length;b<a;b++){var d=xui.util.Dom.getAttribute(this.dom[b],"emptytext");if(d!=null){var c=xui.util.Dom.getStyle(this.dom[b],"color");xui.util.Dom.setAttribute(this.dom[b],"valueColor",c);xui.util.Dom.addClass(this.dom[b],"xui-emptytext");xui.util.ElementUtil.emptyBlur(this.dom[b]);(function(f,e){xui.util.Event.on(f,"focus",xui.util.ElementUtil.emptyFoucs);xui.util.Event.on(f,"blur",xui.util.ElementUtil.emptyBlur);if(!e){xui.util.Event.removeListener(f,"blur",xui.util.ElementUtil.emptyBlur);xui.util.Event.on(f,"focus",function(){xui.util.Event.removeListener(f,"focus",xui.util.ElementUtil.emptyFoucs)})}})(this.dom[b],this.attr.loop)}}},setAttr:function(a){for(var b in a){this.attr[b]=a[b]}}};xui.util.ElementUtil.emptyBlur=function(f,c){var b="#999";if(c){b=c}var e=this;if(f&&f.nodeType){e=f}var d=xui.util.Dom.getAttribute(e,"emptytext");var a=xui.util.StringUtil.trim(e.value);if(a==""){e.value=d;e.style.color=b}};xui.util.ElementUtil.emptyFoucs=function(e){var d=this;if(e&&e.nodeType){d=e}var c=xui.util.Dom.getAttribute(d,"emptytext");var b=xui.util.StringUtil.trim(d.value);var a=xui.util.Dom.getAttribute(d,"valueColor");xui.util.Dom.removeClass(d,"xui-emptytext");if(b==c){d.value="";d.style.color=a}};xui.util.ElementUtil.getValue=function(b){var c=xui.util.Dom.getAttribute(b,"emptytext");var a=xui.util.StringUtil.trim(b.value);if(a==c){return""}return a};
